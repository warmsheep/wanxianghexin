# 开放平台

---

## 一、API开放平台

> 面向企业、开发者、合作平台，需要提供统一的API接口规范，清晰的接口文档，同时提供上手可用的API Demo示例、SDK集成案例，做到接入方开箱即用，实现快速接入。环境准备上，提供全程可自助测试的沙箱环境，接入方可自主完成接入测试。
>
> API针对不同的客户之间，同时需要做好客户隔离、接口隔离、网络区分，保障不同客户、不同接口之间互不影响，精细化接口管理和客户管理。

以下是API开放平台的调用示意图

![](/assets/API调用示例.png)

### APISIX

> **Apache APISIX**是一个动态、实时、高性能的 API 网关， 提供负载均衡、动态证书、 动态上游、灰度发布、服务熔断、身份认证、可观测性、A/B 测试、金丝雀发布\(灰度发布\)、蓝绿部署、限流限速、抵御恶意攻击、监控报警、服务治理等丰富的流量管理功能。
>
> 同时APISIX具有全平台、多协议、热更新、全动态、精细化路由、安全防护以及运维友好的特点。契合对API网关需要能力的定位。

* #### **APISIX的优势**

| **功能** | **Apache APISIX** |
| :--- | :--- |
| 项目归属 | Apache 软件基金会 |
| 技术架构 | Nginx + etcd |
| 单核 QPS \(开启限流和 prometheus 插件\) | 18000 |
| 平均延迟 | 0.2 毫秒 |
| 配置回滚 | 是 |
| 支持生命周期的路由 | 是 |
| 插件热更新 | 是 |
| 用户自定义：负载均衡算法、路由 | 是 |
| 支持 Tengine 作为运行时 | 是 |
| MQTT 协议支持 | 是 |
| 配置生效时间 | 事件通知，低于 1 毫秒更新 |
| 自带控制台 | 是 |
| 对接外部身份认证服务 | 是 |
| 配置中心高可用\(HA\) | 是 |
| 支持任何 Nginx 变量做路由条件 | 是 |

### API服务

> 采用SpringCloud微服务架构，在集群中运行多节点的网关，根据上层APISIX负载算法分流请求数据。
>
> API服务相比APISIX网关提供了更精细化的API管理

* 客户权限、接口权限验证
* 身份识别、证书验证（CFCA颁发证书）、操作员验签
* 接口限流控制，针对不同客户不同类型接口可分别控制流量（采用Google Guava）
* 信息防篡改验证
* 灰度分发（根据不同的客户、不同交易进行灰度分发验证）
* 信息加解密（支持RSA/国密算法）

### SDK服务

> 将所有业务接口，封装好SDK，提供多语言SDK给到客户方使用，简单集成即可上业务

* JAVA
* Python
* C\#

### 沙箱服务

> 提供沙箱服务，方便客户自助调试、自助测试，在线快速体验各类服务

![](/assets/沙箱接入示例.png)

## 二、伙伴开放平台

> 伙伴开放平台针对全国伙伴（平台、开发者、顾问、交付、代理商），开放一系列管理平台以及交付工具。让伙伴能够及时响应客户，加快交付速度，提升交付能力，实现生态伙伴的客户价值。通过开放生态，将交付能力、营销能力、产品能力复制到每个生态伙伴。

* 具备全在线自助入网、合同签署
* 打通伙伴订购系统，档案自动录入
* 具备沙箱环境申请，前置机预约、租用、调试
* 在线测试，在线出具银行测试报告
* 伙伴的能力集成（API、客服、工单、实施、订购、分享）

![](/assets/伙伴开放平台流程.png)

